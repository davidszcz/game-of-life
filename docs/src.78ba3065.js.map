{"version":3,"sources":["../../node_modules/noliter/dist/index.esm.js","../engine.ts","../index.ts"],"names":["createObserver","initialValue","key","value","subscribers","newValue","k","callback","listenerKey","createElement","tagName","builder","html","document","removeChildren","parent","lastChild","removeChild","createAnchor","createAbbr","createAddress","createApplet","createArea","createArticle","createAside","createAudio","createBold","createBase","createBaseFont","createBdi","createBdo","createBlockQuote","createBody","createBr","createButton","createCanvas","createCaption","createCite","createCode","createCol","createColGroup","createHeader","createLink","createMain","createSection","createSpan"],"mappings":"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","file":"src.78ba3065.js","sourceRoot":"..\\src\\static","sourcesContent":["function createObserver(initialValue) {\r\n    var key = 0;\r\n    var value = initialValue;\r\n    var subscribers = {};\r\n    return [\r\n        function getValue() {\r\n            return value;\r\n        },\r\n        function setValue(newValue) {\r\n            value = newValue;\r\n            for (var k in subscribers) {\r\n                subscribers[k](value);\r\n            }\r\n        },\r\n        function subscribeValue(callback) {\r\n            subscribers[key] = callback;\r\n            return key++;\r\n        },\r\n        function unsubscribeValue(listenerKey) {\r\n            delete subscribers[listenerKey];\r\n        },\r\n    ];\r\n}\r\n\r\nfunction createElement(tagName, builder) {\r\n    var html = document.createElement(tagName);\r\n    builder && builder(html);\r\n    return html;\r\n}\r\nfunction removeChildren(parent) {\r\n    while (parent.lastChild) {\r\n        parent.removeChild(parent.lastChild);\r\n    }\r\n}\r\n\r\nfunction createAnchor(builder) {\r\n    return createElement(\"a\", builder);\r\n}\r\nfunction createAbbr(builder) {\r\n    return createElement(\"abbr\", builder);\r\n}\r\nfunction createAddress(builder) {\r\n    return createElement(\"address\", builder);\r\n}\r\nfunction createApplet(builder) {\r\n    return createElement(\"applet\", builder);\r\n}\r\nfunction createArea(builder) {\r\n    return createElement(\"area\", builder);\r\n}\r\nfunction createArticle(builder) {\r\n    return createElement(\"article\", builder);\r\n}\r\nfunction createAside(builder) {\r\n    return createElement(\"aside\", builder);\r\n}\r\nfunction createAudio(builder) {\r\n    return createElement(\"audio\", builder);\r\n}\r\nfunction createBold(builder) {\r\n    return createElement(\"b\", builder);\r\n}\r\nfunction createBase(builder) {\r\n    return createElement(\"base\", builder);\r\n}\r\nfunction createBaseFont(builder) {\r\n    return createElement(\"basefont\", builder);\r\n}\r\nfunction createBdi(builder) {\r\n    return createElement(\"bdi\", builder);\r\n}\r\nfunction createBdo(builder) {\r\n    return createElement(\"bdo\", builder);\r\n}\r\nfunction createBlockQuote(builder) {\r\n    return createElement(\"blockquote\", builder);\r\n}\r\nfunction createBody(builder) {\r\n    return createElement(\"body\", builder);\r\n}\r\nfunction createBr(builder) {\r\n    return createElement(\"br\", builder);\r\n}\r\nfunction createButton(builder) {\r\n    return createElement(\"button\", builder);\r\n}\r\nfunction createCanvas(builder) {\r\n    return createElement(\"canvas\", builder);\r\n}\r\nfunction createCaption(builder) {\r\n    return createElement(\"caption\", builder);\r\n}\r\nfunction createCite(builder) {\r\n    return createElement(\"cite\", builder);\r\n}\r\nfunction createCode(builder) {\r\n    return createElement(\"code\", builder);\r\n}\r\nfunction createCol(builder) {\r\n    return createElement(\"col\", builder);\r\n}\r\nfunction createColGroup(builder) {\r\n    return createElement(\"colgroup\", builder);\r\n}\r\nfunction createHeader(builder) {\r\n    return createElement(\"header\", builder);\r\n}\r\nfunction createLink(builder) {\r\n    return createElement(\"link\", builder);\r\n}\r\nfunction createMain(builder) {\r\n    return createElement(\"main\", builder);\r\n}\r\nfunction createSection(builder) {\r\n    return createElement(\"section\", builder);\r\n}\r\nfunction createSpan(builder) {\r\n    return createElement(\"span\", builder);\r\n}\r\n\r\nexport { createAbbr, createAddress, createAnchor, createApplet, createArea, createArticle, createAside, createAudio, createBase, createBaseFont, createBdi, createBdo, createBlockQuote, createBody, createBold, createBr, createButton, createCanvas, createCaption, createCite, createCode, createCol, createColGroup, createElement, createHeader, createLink, createMain, createObserver, createSection, createSpan, removeChildren };\r\n","import { createCanvas } from 'noliter';\r\n\r\nenum DOTS_STYLE {\r\n  WIDTH = 16,\r\n  HEIGHT = 16,\r\n  MARGIN = 2,\r\n  DEAD_COLOR = '#FFF',\r\n  SURVIVE_COLOR = '#000',\r\n}\r\n\r\nconst BACKGROUND_COLOR = '#FFF';\r\n\r\nconst getCoordinateX = (x: number): number => {\r\n  return (DOTS_STYLE.MARGIN + DOTS_STYLE.WIDTH) * x + DOTS_STYLE.MARGIN;\r\n};\r\n\r\nconst getCoordinateY = (y: number): number => {\r\n  return (DOTS_STYLE.MARGIN + DOTS_STYLE.HEIGHT) * y + DOTS_STYLE.MARGIN;\r\n};\r\n\r\nexport class GameOfLifeEngine {\r\n  public canvas: HTMLCanvasElement;\r\n  public context: CanvasRenderingContext2D;\r\n  private life: Life[][];\r\n  private intervalKey: null | number = null;\r\n  public partyMode: boolean = false;\r\n\r\n  constructor(life: Life[][]) {\r\n    createCanvas((cvs) => {\r\n      const ctx = cvs.getContext('2d');\r\n      if (ctx) {\r\n        this.canvas = cvs;\r\n        this.context = ctx;\r\n      } else {\r\n        throw 'Failed to create context';\r\n      }\r\n    });\r\n    this.setLife(life);\r\n    this.startLife();\r\n  }\r\n\r\n  setLife(life: Life[][]): void {\r\n    this.life = life;\r\n    this.canvas.width = getCoordinateX(life[0].length);\r\n    this.canvas.height = getCoordinateY(life.length);\r\n  }\r\n\r\n  setPartyMode() {\r\n    this.partyMode = !this.partyMode;\r\n    document.querySelector('#party-mode').classList.toggle('active');\r\n  }\r\n\r\n  public clear(): void {\r\n    this.context.fillStyle = BACKGROUND_COLOR;\r\n    this.context.fillRect(0, 0, this.canvas.width, this.canvas.height);\r\n  }\r\n\r\n  public startLife(): void {\r\n    if (!this.intervalKey) {\r\n      this.drawDots();\r\n      this.intervalKey = window.setInterval(() => {\r\n        this.life = this.life.map((children, i) => children.map((isSurvive, j) => this.nextLife(j, i, isSurvive)));\r\n        this.drawDots();\r\n      }, 500);\r\n    }\r\n  }\r\n\r\n  public stopLife(): void {\r\n    if (this.intervalKey !== null) {\r\n      window.clearInterval(this.intervalKey);\r\n      this.intervalKey = null;\r\n    }\r\n  }\r\n\r\n  protected drawDot(x: number, y: number): void {\r\n    this.context.fillRect(getCoordinateX(x), getCoordinateY(y), DOTS_STYLE.WIDTH, DOTS_STYLE.HEIGHT);\r\n  }\r\n\r\n  protected drawDots(): void {\r\n    this.clear();\r\n    this.life.forEach((children, i) => {\r\n      children.forEach((isSurvive, j) => {\r\n        if(this.partyMode) {\r\n          this.context.fillStyle = isSurvive ? this.getRandomColor() : DOTS_STYLE.DEAD_COLOR;\r\n        } else {\r\n          this.context.fillStyle = isSurvive ? DOTS_STYLE.SURVIVE_COLOR : DOTS_STYLE.DEAD_COLOR;\r\n        }\r\n        this.drawDot(j, i);\r\n      });\r\n    });\r\n  }\r\n\r\n  protected isSurvive(x: number, y: number): Life {\r\n    return this.life[y] && this.life[y][x] ? 1 : 0;\r\n  }\r\n\r\n  protected nextLife(x: number, y: number, isSurvive: Life): Life {\r\n    const count = this.isSurvive(x - 1, y - 1) + this.isSurvive(x, y - 1) + this.isSurvive(x + 1, y - 1) + this.isSurvive(x - 1, y) + this.isSurvive(x + 1, y) + this.isSurvive(x - 1, y + 1) + this.isSurvive(x, y + 1) + this.isSurvive(x + 1, y + 1);\r\n    return count === 3 || (isSurvive && count === 2) ? 1 : 0;\r\n  }\r\n\r\n  protected getRandomColor(){\r\n    var letters = '0123456789ABCDEF';\r\n    var color = '#';\r\n    for (var i = 0; i < 6; i++) {\r\n      color += letters[Math.floor(Math.random() * 16)];\r\n    }\r\n    return color;\r\n  }\r\n\r\n  \r\n}\r\n","import { createMain } from 'noliter';\r\nimport { GameOfLifeEngine } from './engine';\r\n\r\nconst engine = new GameOfLifeEngine([[]]);\r\nconst select = document.getElementById('patterns') as HTMLSelectElement;\r\n\r\nconst fetchLife = () =>\r\n  fetch(`./patterns/${select.value}`)\r\n    .then((res) => res.json())\r\n    .then(({ life }) => {\r\n      engine.stopLife();\r\n      engine.setLife(life);\r\n      engine.startLife();\r\n    });\r\n\r\nselect.addEventListener('change', () => fetchLife());\r\ndocument.body.appendChild(\r\n  createMain((main) => {\r\n    main.appendChild(engine.canvas);\r\n    fetchLife();\r\n  })\r\n);\r\n\r\n// Add event to btn party-mode\r\ndocument.querySelector('#party-mode').addEventListener('click', (e:Event) => engine.setPartyMode());\r\n\r\n// Filter select options\r\n\r\ndocument.querySelector('#patterns-search').addEventListener('change', (e:Event) => filterFunction());\r\n\r\nfunction filterFunction() {\r\n  var input, filter, ul, li, a, i, div;\r\n  input = document.getElementById(\"patterns-search\");\r\n  filter = input.value.toUpperCase();\r\n  div = document.getElementById(\"patterns\");\r\n  a = div.getElementsByTagName(\"option\");\r\n\r\n  for (i = 0; i < a.length; i++) {\r\n    var txtValue = a[i].textContent || a[i].innerText;\r\n\r\n    if (txtValue.toUpperCase().indexOf(filter) > -1) {\r\n      a[i].style.display = \"\";\r\n    } else {\r\n      a[i].style.display = \"none\";\r\n    }\r\n  }\r\n}"]}